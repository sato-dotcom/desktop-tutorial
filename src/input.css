@tailwind base;
@tailwind components;
@tailwind utilities;

/* Basic layout */
html, body {
  @apply m-0 p-0 h-full overflow-hidden font-sans;
}

#map {
  @apply fixed inset-0 w-screen bg-gray-400;
  height: 100vh; /* Fallback */
  height: 100dvh;
}

/* --- ★★★ 新規追加: Sensor Permission Overlay ★★★ --- */
.sensor-overlay {
    @apply fixed inset-0 z-[10001] bg-black bg-opacity-60 flex items-center justify-center p-4 transition-opacity duration-300;
    backdrop-filter: blur(5px);
}
.sensor-overlay-content {
    @apply bg-white p-6 rounded-lg shadow-xl w-full max-w-sm text-center;
}
.sensor-overlay.hidden {
    @apply opacity-0 pointer-events-none;
}


/* --- Custom Leaflet Controls --- */
.leaflet-control-custom-btn {
  @apply w-[34px] h-[34px] flex items-center justify-center text-lg cursor-pointer transition-colors duration-200;
  line-height: 34px;
}

.leaflet-bar a.leaflet-control-custom-btn.is-on,
.leaflet-bar a.leaflet-control-custom-btn.is-on:hover {
  @apply bg-blue-500 text-white;
}

.leaflet-bar a.leaflet-control-custom-btn.is-off,
.leaflet-bar a.leaflet-control-custom-btn.is-off:hover {
  @apply bg-white text-gray-800;
}
.leaflet-bar a.leaflet-control-custom-btn.is-off:hover {
  @apply bg-gray-100;
}


/* --- User Marker --- */
.user-location-marker {
    /* No transition on the container to prevent lat/lng update jitter */
}
.user-location-marker-rotator {
    @apply w-full h-full;
    transform-origin: center center;
    will-change: transform;
    /* transition-transformをmapController側で制御するため削除 */
}
.user-location-marker svg {
    @apply w-full h-full fill-current text-blue-500;
    filter: drop-shadow(0 0 3px rgba(0,0,0,0.5));
}


/* --- Controls Panel --- */
#controls-panel {
    @apply fixed bottom-0 left-0 right-0 max-h-[60%] transition-transform duration-300 ease-in-out;
    transform: translateY(0);
}

/* --- Fullscreen Mode --- */
body.fullscreen-active #controls-panel {
    transform: translateY(100%);
}
body.fullscreen-active #fullscreen-info-panel {
    @apply opacity-100;
}
#fullscreen-info-panel {
    @apply fixed top-4 left-4 bg-white bg-opacity-80 p-3 rounded-lg shadow-lg pointer-events-none opacity-0 transition-opacity;
    backdrop-filter: blur(5px);
}

/* --- Modals --- */
.modal {
    @apply hidden;
}
.modal.is-open {
    @apply flex;
}

/* --- Scrollbar --- */
.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
}
.custom-scrollbar::-webkit-scrollbar-track {
  @apply bg-gray-100;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  @apply bg-gray-400 rounded-full;
}

/* Spinner for AI button */
.spinner {
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: #fff;
  animation: spin 1s ease-in-out infinite;
}
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* --- ★★★ 変更点: Debug Panel Styles 拡張 ★★★ --- */
.debug-panel {
    @apply fixed bottom-2 right-2 z-[10000] bg-black bg-opacity-70 text-white font-mono text-xs p-2 rounded shadow-lg pointer-events-auto;
    white-space: pre-wrap;
    word-break: break-all;
    max-height: 40vh;
    width: 280px;
    overflow-y: auto;
    display: none; /* 初期状態は非表示 */
}

